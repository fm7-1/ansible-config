---

- name: Create .fonts directory
  ansible.builtin.file:
    path: "{{ ansible_env.HOME }}/.fonts"
    state: directory
    mode: '0755'

- name: Create temp directory for fonts
  ansible.builtin.file:
    path: "/tmp/fonts"
    state: directory

- name: Download and unarchive fonts
  ansible.builtin.unarchive:
    src: "{{ item }}"
    dest: /tmp/fonts/
    remote_src: yes
  with_items: "{{ fonts_urls }}"

- name: Copy downloaded fonts to the .fonts directory
  ansible.builtin.copy:
    src: "{{ item }}"
    dest: "{{ ansible_env.HOME }}/.fonts"
  with_fileglob: "/tmp/fonts/*.otf"
